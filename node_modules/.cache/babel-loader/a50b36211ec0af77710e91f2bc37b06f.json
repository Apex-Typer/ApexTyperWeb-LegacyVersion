{"ast":null,"code":"var _jsxFileName = \"D:\\\\APEX_TYPER\\\\apex_typer_5.0\\\\src\\\\components\\\\TextInput.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { firstWord, nextWord, prevWord, updateInput, resetInput, newWords, evaluateWords, updateCurrentWordForward, focusInput, blurInput } from \"../state/action-creators/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TextInput(props) {\n  _s();\n\n  const currentWord = useSelector(state => state.currentWord);\n  const enteredWord = useSelector(state => state.enteredWord);\n  const testWords = useSelector(state => state.testWords);\n  const inputFocused = useSelector(state => state.inputFocused);\n  inputRef = useRef(null);\n  const dispatch = useDispatch();\n  const inputType = localStorage.getItem(\"input\") === null ? \"FLOAT\" : localStorage.getItem(\"input\");\n  const testContentScrollerCount = useRef(1);\n  var textInput = document.getElementById(\"textInput\");\n  useEffect(() => {\n    if (currentWord.key > 0) {\n      if (currentWord.key > 1) {\n        dispatch(resetInput());\n\n        if (document.getElementById(currentWord.id).offsetLeft - document.getElementById(currentWord.id).parentElement.offsetLeft == 0) {\n          testContentScroller();\n        }\n      }\n    }\n  }, [currentWord]);\n  useEffect(() => {\n    dispatch(firstWord());\n  }, []);\n  useEffect(() => {\n    if (currentWord.key != 0) {\n      dispatch(evaluateWords(enteredWord, currentWord, inputType));\n    }\n  }, [enteredWord]);\n\n  function testContentScroller() {\n    let currentLineHeight = parseInt(window.getComputedStyle(document.getElementById(\"testContent\")).getPropertyValue(\"line-height\"));\n    document.getElementById(\"testContentChild\").style.transform = `translateY(-${currentLineHeight * testContentScrollerCount.current}px)`;\n    testContentScrollerCount.current++;\n  }\n\n  function textInputChangeHandler(e) {\n    let keyClicked = e.nativeEvent.data;\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\")); // if (keyClicked == \" \") {\n    //   dispatch(updateCurrentWordForward(enteredWord, currentWord, inputType));\n    //   dispatch(nextWord());\n    // } else {\n    //   dispatch(updateInput(enteredValue));\n    // }\n\n    dispatch(updateInput(enteredValue));\n  }\n\n  function keyDownHandler(e) {\n    let keyClicked = e.nativeEvent.code;\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\"));\n\n    if (keyClicked == \"Space\" && enteredValue != \"\") {\n      dispatch(updateCurrentWordForward(enteredWord, currentWord, inputType));\n      dispatch(nextWord());\n    }\n  }\n\n  function handleClickOutside(e) {\n    if (inputRef.current && !inputRef.current.contains(e.target)) {\n      dispatch(blurInput());\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside, true);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside, true);\n    };\n  }, [inputRef]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    width: `${currentWord.width}px`,\n    left: `${currentWord.left}px`,\n    inputType: inputType,\n    ref: inp,\n    children: /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"textInput\",\n      autoCapitalize: \"off\",\n      autoComplete: \"off\",\n      spellCheck: \"false\",\n      maxLength: \"15\",\n      value: enteredWord,\n      onKeyDown: e => keyDownHandler(e),\n      onChange: e => setTimeout(textInputChangeHandler(e), 1)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TextInput, \"3Q81cHz8/xrM7WLoX92IzBi3ArU=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = TextInput;\nexport default TextInput;\nconst Container = styled.div`\n  width: 100%;\n  position: ${props => props.inputType == \"INLINE\" ? \"absolute\" : \"relative\"};\n  input {\n    background-color: transparent;\n    border: none;\n    border-bottom: ${props => props.inputType == \"INLINE\" ? \"none\" : \"#aaa solid 2px\"};\n    caret-color: ${props => props.inputType == \"INLINE\" ? \"transparent\" : \"#ffff\"};\n    font-size: 1.2em;\n    font-family: \"Quicksand\", sans-serif;\n    font-weight: 500;\n    text-align: center;\n    margin: 10px 0 20px;\n    padding: 3px 3px 5px;\n    color: ${props => props.inputType == \"INLINE\" ? \"transparent\" : \"#ffff\"};\n    width: ${props => props.width};\n    transform: translateX(${props => props.left});\n    transition: all 150ms ease-in-out;\n\n    &:focus {\n      outline: none;\n    }\n  }\n`;\n_c2 = Container;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TextInput\");\n$RefreshReg$(_c2, \"Container\");","map":{"version":3,"sources":["D:/APEX_TYPER/apex_typer_5.0/src/components/TextInput.js"],"names":["React","useState","useEffect","useRef","styled","useSelector","useDispatch","firstWord","nextWord","prevWord","updateInput","resetInput","newWords","evaluateWords","updateCurrentWordForward","focusInput","blurInput","TextInput","props","currentWord","state","enteredWord","testWords","inputFocused","inputRef","dispatch","inputType","localStorage","getItem","testContentScrollerCount","textInput","document","getElementById","key","id","offsetLeft","parentElement","testContentScroller","currentLineHeight","parseInt","window","getComputedStyle","getPropertyValue","style","transform","current","textInputChangeHandler","e","keyClicked","nativeEvent","data","enteredValue","String","target","value","replace","keyDownHandler","code","handleClickOutside","contains","addEventListener","removeEventListener","width","left","inp","setTimeout","Container","div"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  firstWord,\r\n  nextWord,\r\n  prevWord,\r\n  updateInput,\r\n  resetInput,\r\n  newWords,\r\n  evaluateWords,\r\n  updateCurrentWordForward,\r\n  focusInput,\r\n  blurInput,\r\n} from \"../state/action-creators/index\";\r\n\r\nfunction TextInput(props) {\r\n  const currentWord = useSelector((state) => state.currentWord);\r\n  const enteredWord = useSelector((state) => state.enteredWord);\r\n  const testWords = useSelector((state) => state.testWords);\r\n  const inputFocused = useSelector((state) => state.inputFocused);\r\n  inputRef = useRef(null)\r\n  const dispatch = useDispatch();\r\n  const inputType =\r\n    localStorage.getItem(\"input\") === null\r\n      ? \"FLOAT\"\r\n      : localStorage.getItem(\"input\");\r\n\r\n  const testContentScrollerCount = useRef(1);\r\n\r\n  var textInput = document.getElementById(\"textInput\");\r\n\r\n  useEffect(() => {\r\n    if (currentWord.key > 0) {\r\n      if (currentWord.key > 1) {\r\n        dispatch(resetInput());\r\n        if (\r\n          document.getElementById(currentWord.id).offsetLeft -\r\n            document.getElementById(currentWord.id).parentElement.offsetLeft ==\r\n          0\r\n        ) {\r\n          testContentScroller();\r\n        }\r\n      }\r\n    }\r\n  }, [currentWord]);\r\n\r\n  useEffect(() => {\r\n    dispatch(firstWord());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (currentWord.key != 0) {\r\n      dispatch(evaluateWords(enteredWord, currentWord, inputType));\r\n    }\r\n  }, [enteredWord]);\r\n\r\n  function testContentScroller() {\r\n    let currentLineHeight = parseInt(\r\n      window\r\n        .getComputedStyle(document.getElementById(\"testContent\"))\r\n        .getPropertyValue(\"line-height\")\r\n    );\r\n    document.getElementById(\r\n      \"testContentChild\"\r\n    ).style.transform = `translateY(-${\r\n      currentLineHeight * testContentScrollerCount.current\r\n    }px)`;\r\n    testContentScrollerCount.current++;\r\n  }\r\n\r\n  function textInputChangeHandler(e) {\r\n    let keyClicked = e.nativeEvent.data;\r\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\"));\r\n    // if (keyClicked == \" \") {\r\n    //   dispatch(updateCurrentWordForward(enteredWord, currentWord, inputType));\r\n    //   dispatch(nextWord());\r\n    // } else {\r\n    //   dispatch(updateInput(enteredValue));\r\n    // }\r\n    dispatch(updateInput(enteredValue));\r\n  }\r\n\r\n  function keyDownHandler(e) {\r\n    let keyClicked = e.nativeEvent.code;\r\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\"));\r\n    if (keyClicked == \"Space\" && enteredValue != \"\") {\r\n      dispatch(updateCurrentWordForward(enteredWord, currentWord, inputType));\r\n      dispatch(nextWord());\r\n    }\r\n  }\r\n\r\n  function handleClickOutside(e) {\r\n    if (\r\n      inputRef.current &&\r\n      !inputRef.current.contains(e.target)\r\n    ) {\r\n      dispatch(blurInput())\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", handleClickOutside, true);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside, true);\r\n    };\r\n  }, [inputRef]);\r\n\r\n  return (\r\n    <Container\r\n      width={`${currentWord.width}px`}\r\n      left={`${currentWord.left}px`}\r\n      inputType={inputType}\r\n      ref={inp}\r\n    >\r\n      <input\r\n        id=\"textInput\"\r\n        autoCapitalize=\"off\"\r\n        autoComplete=\"off\"\r\n        spellCheck=\"false\"\r\n        maxLength=\"15\"\r\n        value={enteredWord}\r\n        onKeyDown={(e) => keyDownHandler(e)}\r\n        onChange={(e) => setTimeout(textInputChangeHandler(e), 1)}\r\n      ></input>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default TextInput;\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  position: ${(props) =>\r\n    props.inputType == \"INLINE\" ? \"absolute\" : \"relative\"};\r\n  input {\r\n    background-color: transparent;\r\n    border: none;\r\n    border-bottom: ${(props) =>\r\n      props.inputType == \"INLINE\" ? \"none\" : \"#aaa solid 2px\"};\r\n    caret-color: ${(props) =>\r\n      props.inputType == \"INLINE\" ? \"transparent\" : \"#ffff\"};\r\n    font-size: 1.2em;\r\n    font-family: \"Quicksand\", sans-serif;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    margin: 10px 0 20px;\r\n    padding: 3px 3px 5px;\r\n    color: ${(props) =>\r\n      props.inputType == \"INLINE\" ? \"transparent\" : \"#ffff\"};\r\n    width: ${(props) => props.width};\r\n    transform: translateX(${(props) => props.left});\r\n    transition: all 150ms ease-in-out;\r\n\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n  }\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}