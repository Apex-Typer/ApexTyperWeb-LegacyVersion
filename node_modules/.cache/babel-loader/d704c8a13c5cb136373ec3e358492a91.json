{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/APEX_TYPER/apex_typer_5.0/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3;import React,{useState,useEffect,useRef}from\"react\";import{useSelector}from\"react-redux\";import styled from\"styled-components\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TestResult(){var inputLog=useSelector(function(state){return state.inputLog;});var time=useSelector(function(state){return state.testTimer.time;});var timeMultiplier=60/time;var totalWords=inputLog.log.length;var completedWords=useSelector(function(state){return state.testWords.rawWords.slice(0,totalWords);});var totalLetters=completedWords.join(\"\").length;var totalWrongWords=inputLog.wrongWords;var totalCorrectWords=totalWords-totalWrongWords;var totalErrors=inputLog.errors;var accuracy=Math.max(0,Math.round((1-(totalErrors+totalWrongWords)/totalLetters)*100));var wpm=Math.round(totalCorrectWords*timeMultiplier);function resultReveal(element){var counters=document.querySelectorAll(element);var speed=100;counters.forEach(function(counter){var animate=function animate(){var value=+counter.getAttribute(\"result\");var data=+counter.innerText;var time=value/speed;if(data<value){counter.innerText=Math.ceil(data+time);// setTimeout(animate, 20 * (data / value));\nsetTimeout(animate,1*(value/data));}else{counter.innerText=value;}};animate();});}useEffect(function(){resultReveal(\".result-num\");document.getElementById(\"App\").focus();},[]);return/*#__PURE__*/_jsx(Container,{tabIndex:3,children:wpm>0&&accuracy>0?/*#__PURE__*/_jsxs(ValidResult,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"result-num\",result:wpm,children:\"0\"}),\"_wpm\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"result-num\",result:accuracy,children:\"0\"}),\"%_accuracy\"]})]}):/*#__PURE__*/_jsx(InvalidResult,{children:\"The test was invalid, try again!\"})});}export default TestResult;var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\"])));var ValidResult=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-wrap: wrap;\\n  p {\\n    font-size: 3rem;\\n    color: cyan;\\n    margin: 0;\\n    /* width: 3.8rem; */\\n  }\\n  span {\\n    margin-top: 20px;\\n    font-size: 2rem;\\n    color: #aaa;\\n    display: flex;\\n    align-items: baseline;\\n    margin-right: 60px;\\n  }\\n\"])));var InvalidResult=styled.span(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  margin-top: 50px;\\n  color: rgba(255,255,255,0.4);\\n  font-size: 1.5rem;\\n\"])));","map":{"version":3,"sources":["D:/APEX_TYPER/apex_typer_5.0/src/components/TestResult.js"],"names":["React","useState","useEffect","useRef","useSelector","styled","TestResult","inputLog","state","time","testTimer","timeMultiplier","totalWords","log","length","completedWords","testWords","rawWords","slice","totalLetters","join","totalWrongWords","wrongWords","totalCorrectWords","totalErrors","errors","accuracy","Math","max","round","wpm","resultReveal","element","counters","document","querySelectorAll","speed","forEach","counter","animate","value","getAttribute","data","innerText","ceil","setTimeout","getElementById","focus","Container","div","ValidResult","InvalidResult","span"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\n\r\nfunction TestResult() {\r\n  const inputLog = useSelector((state) => state.inputLog);\r\n\r\n  const time = useSelector((state) => state.testTimer.time);\r\n  const timeMultiplier = 60 / time;\r\n  const totalWords = inputLog.log.length;\r\n  const completedWords = useSelector((state) =>\r\n    state.testWords.rawWords.slice(0, totalWords)\r\n  );\r\n  const totalLetters = completedWords.join(\"\").length;\r\n  const totalWrongWords = inputLog.wrongWords;\r\n  const totalCorrectWords = totalWords - totalWrongWords;\r\n  const totalErrors = inputLog.errors;\r\n\r\n  const accuracy = Math.max(\r\n    0,\r\n    Math.round((1 - (totalErrors + totalWrongWords) / totalLetters) * 100)\r\n  );\r\n  const wpm = Math.round(totalCorrectWords * timeMultiplier);\r\n\r\n  function resultReveal(element) {\r\n    const counters = document.querySelectorAll(element);\r\n    const speed = 100;\r\n\r\n    counters.forEach((counter) => {\r\n      const animate = () => {\r\n        const value = +counter.getAttribute(\"result\");\r\n        const data = +counter.innerText;\r\n\r\n        const time = value / speed;\r\n        if (data < value) {\r\n          counter.innerText = Math.ceil(data + time);\r\n          // setTimeout(animate, 20 * (data / value));\r\n          setTimeout(animate, 1 * (value / data));\r\n        } else {\r\n          counter.innerText = value;\r\n        }\r\n      };\r\n\r\n      animate();\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    resultReveal(\".result-num\");\r\n    document.getElementById(\"App\").focus();\r\n  }, []);\r\n\r\n  return (\r\n    <Container tabIndex={3}>\r\n      {wpm > 0 && accuracy > 0 ? (\r\n        <ValidResult>\r\n          <span>\r\n            <p className=\"result-num\" result={wpm}>\r\n              0\r\n            </p>\r\n            _wpm\r\n          </span>\r\n          <span>\r\n            <p className=\"result-num\" result={accuracy}>\r\n              0\r\n            </p>\r\n            %_accuracy\r\n          </span>\r\n        </ValidResult>\r\n      ) : (\r\n        <InvalidResult>The test was invalid, try again!</InvalidResult>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default TestResult;\r\n\r\nconst Container = styled.div`\r\n`;\r\n\r\nconst ValidResult = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  p {\r\n    font-size: 3rem;\r\n    color: cyan;\r\n    margin: 0;\r\n    /* width: 3.8rem; */\r\n  }\r\n  span {\r\n    margin-top: 20px;\r\n    font-size: 2rem;\r\n    color: #aaa;\r\n    display: flex;\r\n    align-items: baseline;\r\n    margin-right: 60px;\r\n  }\r\n`;\r\n\r\nconst InvalidResult = styled.span`\r\n  display: flex;\r\n  margin-top: 50px;\r\n  color: rgba(255,255,255,0.4);\r\n  font-size: 1.5rem;\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}