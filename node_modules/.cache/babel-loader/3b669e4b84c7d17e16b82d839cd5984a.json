{"ast":null,"code":"var _jsxFileName = \"D:\\\\APEX_TYPER\\\\apex_typer_5.0\\\\src\\\\components\\\\TextInput.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { confirmWord, nextWord, prevWord, updateInput, resetInput, newWords, evaluateWords } from \"../state/action-creators/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TextInput(props) {\n  _s();\n\n  const curWord = useSelector(state => state.currentWord);\n  const enteredWord = useSelector(state => state.enteredWord);\n  const testWords = useSelector(state => state.testWords);\n  const dispatch = useDispatch();\n  const testContentScrollerCount = useRef(1);\n  var textInput = document.getElementById(\"textInput\");\n\n  if (currentWord.key > 1 && document.getElementById(currentWord.id).offsetLeft - document.getElementById(currentWord.id).parentElement.offsetLeft == 5) {\n    testContentScroller();\n  }\n\n  useEffect(() => {\n    if (curWord.word != \"\") {\n      currentWordBlinker();\n      textInput.focus();\n    }\n  }, [enteredWord, curWord]);\n  useEffect(() => {\n    dispatch(confirmWord());\n    setCurrentWord(prevWord => ({ ...prevWord,\n      word: document.getElementById(currentWord.id).innerText,\n      width: document.getElementById(currentWord.id).offsetWidth,\n      left: document.getElementById(currentWord.id).offsetLeft - document.getElementById(currentWord.id).parentElement.offsetLeft\n    }));\n  }, []);\n\n  function currentWordBlinker() {\n    if (textInput.value == \"\" || textInput.value == \" \") {\n      document.getElementById(currentWord.id).classList.add(\"current-word-blinker\");\n    } else {\n      document.getElementById(currentWord.id).classList.remove(\"current-word-blinker\");\n    }\n  }\n\n  function testContentScroller() {\n    let currentLineHeight = parseInt(window.getComputedStyle(document.getElementById(\"testContent\")).getPropertyValue(\"line-height\"));\n    document.getElementById(\"testContentChild\").style.transform = `translateY(-${currentLineHeight * testContentScrollerCount.current}px)`;\n    testContentScrollerCount.current++;\n  }\n\n  function wordIncrementer(e) {\n    let enteredValue = e.target.value.replace(/\\s/g, \"\");\n    textInput.value = \"\";\n    document.getElementById(currentWord.id).classList.remove(\"current-word-blinker\");\n    document.getElementById(currentWord.id).classList.remove(\"right-warning\");\n    document.getElementById(currentWord.id).classList.remove(\"wrong-warning\");\n    document.getElementById(currentWord.id).classList.remove(\"current-word\");\n\n    if (enteredValue == currentWord.word) {\n      document.getElementById(currentWord.id).classList.add(\"correct\");\n    } else {\n      document.getElementById(currentWord.id).classList.add(\"wrong\"); // wrongWordHandler(e);\n    }\n\n    document.getElementById(`word-${currentWord.key + 1}`).classList.add(\"current-word\");\n    setCurrentWord(prevWord => ({\n      key: prevWord.key + 1,\n      id: `word-${prevWord.key + 1}`,\n      word: document.getElementById(`word-${prevWord.key + 1}`).innerText,\n      width: document.getElementById(`word-${prevWord.key + 1}`).offsetWidth,\n      left: document.getElementById(`word-${prevWord.key + 1}`).offsetLeft - document.getElementById(`word-${prevWord.key + 1}`).parentElement.offsetLeft\n    }));\n  }\n\n  function textInputEvaluater(e) {\n    let enteredValue = e.target.value.replace(/\\s/g, \"\");\n    document.getElementById(currentWord.id).classList.remove(\"right-warning\");\n    document.getElementById(currentWord.id).classList.remove(\"wrong-warning\");\n\n    if (enteredValue != currentWord.word.slice(0, enteredValue.length)) {\n      document.getElementById(currentWord.id).classList.add(\"wrong-warning\");\n    } else if (enteredValue == currentWord.word) {\n      document.getElementById(currentWord.id).classList.add(\"right-warning\");\n    }\n  }\n\n  function textInputClickHandler(e) {\n    if (e.keyCode == 32) {\n      if (e.target.value == \"\" || e.target.value == \" \") {\n        textInput.value = \"\";\n      } else {\n        wordIncrementer(e);\n      }\n    } else {\n      textInputEvaluater(e);\n      currentWordBlinker();\n    }\n  }\n\n  function wrongWordHandler(e) {\n    let enteredValue = e.target.value.replace(/\\s/g, \"\");\n    let entValLen = enteredValue.length;\n    let currWrdLen = currentWord.word.length;\n\n    if (currWrdLen <= entValLen) {\n      for (let i = 0; i < currWrdLen; i++) {\n        if (currentWord.word[i] == enteredValue[i]) {\n          document.getElementById(`${currentWord.id}-letter-${i}`).classList.add(\"yellow\");\n        } else {\n          document.getElementById(`${currentWord.id}-letter-${i}`).classList.add(\"wrong\");\n        }\n      }\n\n      if (currWrdLen < entValLen) {\n        let extraLetters = enteredValue.slice(currWrdLen);\n\n        for (let i = 0; i < extraLetters.length; i++) {\n          let newLetter = document.createElement(\"span\").appendChild(document.createTextNode(extraLetters[i]));\n          newLetter.setAttribute(\"id\", `${currentWord.id}-letter-${currWrdLen + i}`);\n          newLetter.setAttribute(\"class\", \"wrong\");\n          document.getElementById(currentWord.id).appendChild(newLetter);\n        }\n      }\n    } else {\n      for (let i = 0; i < currWrdLen; i++) {\n        if (i < entValLen) {\n          if (currentWord.word[i] == enteredValue[i]) {\n            document.getElementById(`${currentWord.id}-letter-${i}`).classList.add(\"yellow\");\n          } else {\n            document.getElementById(`${currentWord.id}-letter-${i}`).classList.add(\"wrong\");\n          }\n        } else {\n          document.getElementById(`${currentWord.id}-letter-${i}`).classList.add(\"wrong\");\n        }\n      }\n    }\n  }\n\n  function textInputChangeHandler(e) {\n    let keyClicked = e.nativeEvent.data;\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\"));\n\n    if (keyClicked == \" \") {} else {\n      dispatch(updateInput(enteredValue));\n    }\n  }\n\n  useEffect(() => {\n    dispatch(evaluateWords(enteredWord, curWord));\n  }, [enteredWord]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    width: `${currentWord.width}px`,\n    left: `${currentWord.left}px`,\n    children: /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"textInput\",\n      autoCapitalize: \"off\",\n      autoComplete: \"off\",\n      spellCheck: \"false\",\n      maxLength: \"15\",\n      value: enteredWord,\n      onChange: e => setTimeout(textInputChangeHandler(e), 1)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 198,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TextInput, \"zSX9z3ly3C1gCnrQ5fcru8xMzZ4=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = TextInput;\nexport default TextInput;\nconst Container = styled.div`\n  width: 100%;\n  input {\n    background-color: transparent;\n    border: none;\n    border-bottom: #aaa solid 2px;\n    caret-color: #ffff;\n    font-size: 1.2em;\n    text-align: center;\n    margin: 10px 0 20px;\n    padding: 3px 3px 5px;\n    color: #ffff;\n    width: ${props => props.width};\n    transform: translateX(${props => props.left});\n    transition: all 150ms ease-in-out;\n\n    &:focus {\n      outline: none;\n    }\n  }\n`;\n_c2 = Container;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TextInput\");\n$RefreshReg$(_c2, \"Container\");","map":{"version":3,"sources":["D:/APEX_TYPER/apex_typer_5.0/src/components/TextInput.js"],"names":["React","useState","useEffect","useRef","styled","useSelector","useDispatch","confirmWord","nextWord","prevWord","updateInput","resetInput","newWords","evaluateWords","TextInput","props","curWord","state","currentWord","enteredWord","testWords","dispatch","testContentScrollerCount","textInput","document","getElementById","key","id","offsetLeft","parentElement","testContentScroller","word","currentWordBlinker","focus","setCurrentWord","innerText","width","offsetWidth","left","value","classList","add","remove","currentLineHeight","parseInt","window","getComputedStyle","getPropertyValue","style","transform","current","wordIncrementer","e","enteredValue","target","replace","textInputEvaluater","slice","length","textInputClickHandler","keyCode","wrongWordHandler","entValLen","currWrdLen","i","extraLetters","newLetter","createElement","appendChild","createTextNode","setAttribute","textInputChangeHandler","keyClicked","nativeEvent","data","String","setTimeout","Container","div"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  confirmWord,\r\n  nextWord,\r\n  prevWord,\r\n  updateInput,\r\n  resetInput,\r\n  newWords,\r\n  evaluateWords,\r\n} from \"../state/action-creators/index\";\r\n\r\nfunction TextInput(props) {\r\n  const curWord = useSelector((state) => state.currentWord);\r\n  const enteredWord = useSelector((state) => state.enteredWord);\r\n  const testWords = useSelector((state) => state.testWords);\r\n  const dispatch = useDispatch();\r\n\r\n  const testContentScrollerCount = useRef(1);\r\n\r\n  var textInput = document.getElementById(\"textInput\");\r\n\r\n  if (\r\n    currentWord.key > 1 &&\r\n    document.getElementById(currentWord.id).offsetLeft -\r\n      document.getElementById(currentWord.id).parentElement.offsetLeft ==\r\n      5\r\n  ) {\r\n    testContentScroller();\r\n  }\r\n  useEffect(() => {\r\n    if (curWord.word != \"\") {\r\n      currentWordBlinker();\r\n      textInput.focus();\r\n    }\r\n  }, [enteredWord, curWord]);\r\n\r\n  useEffect(() => {\r\n    dispatch(confirmWord());\r\n    setCurrentWord((prevWord) => ({\r\n      ...prevWord,\r\n      word: document.getElementById(currentWord.id).innerText,\r\n      width: document.getElementById(currentWord.id).offsetWidth,\r\n      left:\r\n        document.getElementById(currentWord.id).offsetLeft -\r\n        document.getElementById(currentWord.id).parentElement.offsetLeft,\r\n    }));\r\n  }, []);\r\n\r\n  function currentWordBlinker() {\r\n    if (textInput.value == \"\" || textInput.value == \" \") {\r\n      document\r\n        .getElementById(currentWord.id)\r\n        .classList.add(\"current-word-blinker\");\r\n    } else {\r\n      document\r\n        .getElementById(currentWord.id)\r\n        .classList.remove(\"current-word-blinker\");\r\n    }\r\n  }\r\n\r\n  function testContentScroller() {\r\n    let currentLineHeight = parseInt(\r\n      window\r\n        .getComputedStyle(document.getElementById(\"testContent\"))\r\n        .getPropertyValue(\"line-height\")\r\n    );\r\n    document.getElementById(\r\n      \"testContentChild\"\r\n    ).style.transform = `translateY(-${\r\n      currentLineHeight * testContentScrollerCount.current\r\n    }px)`;\r\n    testContentScrollerCount.current++;\r\n  }\r\n\r\n  function wordIncrementer(e) {\r\n    let enteredValue = e.target.value.replace(/\\s/g, \"\");\r\n    textInput.value = \"\";\r\n    document\r\n      .getElementById(currentWord.id)\r\n      .classList.remove(\"current-word-blinker\");\r\n    document.getElementById(currentWord.id).classList.remove(\"right-warning\");\r\n    document.getElementById(currentWord.id).classList.remove(\"wrong-warning\");\r\n    document.getElementById(currentWord.id).classList.remove(\"current-word\");\r\n    if (enteredValue == currentWord.word) {\r\n      document.getElementById(currentWord.id).classList.add(\"correct\");\r\n    } else {\r\n      document.getElementById(currentWord.id).classList.add(\"wrong\");\r\n      // wrongWordHandler(e);\r\n    }\r\n    document\r\n      .getElementById(`word-${currentWord.key + 1}`)\r\n      .classList.add(\"current-word\");\r\n\r\n    setCurrentWord((prevWord) => ({\r\n      key: prevWord.key + 1,\r\n      id: `word-${prevWord.key + 1}`,\r\n      word: document.getElementById(`word-${prevWord.key + 1}`).innerText,\r\n      width: document.getElementById(`word-${prevWord.key + 1}`).offsetWidth,\r\n      left:\r\n        document.getElementById(`word-${prevWord.key + 1}`).offsetLeft -\r\n        document.getElementById(`word-${prevWord.key + 1}`).parentElement\r\n          .offsetLeft,\r\n    }));\r\n  }\r\n\r\n  function textInputEvaluater(e) {\r\n    let enteredValue = e.target.value.replace(/\\s/g, \"\");\r\n    document.getElementById(currentWord.id).classList.remove(\"right-warning\");\r\n    document.getElementById(currentWord.id).classList.remove(\"wrong-warning\");\r\n    if (enteredValue != currentWord.word.slice(0, enteredValue.length)) {\r\n      document.getElementById(currentWord.id).classList.add(\"wrong-warning\");\r\n    } else if (enteredValue == currentWord.word) {\r\n      document.getElementById(currentWord.id).classList.add(\"right-warning\");\r\n    }\r\n  }\r\n\r\n  function textInputClickHandler(e) {\r\n    if (e.keyCode == 32) {\r\n      if (e.target.value == \"\" || e.target.value == \" \") {\r\n        textInput.value = \"\";\r\n      } else {\r\n        wordIncrementer(e);\r\n      }\r\n    } else {\r\n      textInputEvaluater(e);\r\n      currentWordBlinker();\r\n    }\r\n  }\r\n\r\n  function wrongWordHandler(e) {\r\n    let enteredValue = e.target.value.replace(/\\s/g, \"\");\r\n    let entValLen = enteredValue.length;\r\n    let currWrdLen = currentWord.word.length;\r\n    if (currWrdLen <= entValLen) {\r\n      for (let i = 0; i < currWrdLen; i++) {\r\n        if (currentWord.word[i] == enteredValue[i]) {\r\n          document\r\n            .getElementById(`${currentWord.id}-letter-${i}`)\r\n            .classList.add(\"yellow\");\r\n        } else {\r\n          document\r\n            .getElementById(`${currentWord.id}-letter-${i}`)\r\n            .classList.add(\"wrong\");\r\n        }\r\n      }\r\n      if (currWrdLen < entValLen) {\r\n        let extraLetters = enteredValue.slice(currWrdLen);\r\n        for (let i = 0; i < extraLetters.length; i++) {\r\n          let newLetter = document\r\n            .createElement(\"span\")\r\n            .appendChild(document.createTextNode(extraLetters[i]));\r\n          newLetter.setAttribute(\r\n            \"id\",\r\n            `${currentWord.id}-letter-${currWrdLen + i}`\r\n          );\r\n          newLetter.setAttribute(\"class\", \"wrong\");\r\n          document.getElementById(currentWord.id).appendChild(newLetter);\r\n        }\r\n      }\r\n    } else {\r\n      for (let i = 0; i < currWrdLen; i++) {\r\n        if (i < entValLen) {\r\n          if (currentWord.word[i] == enteredValue[i]) {\r\n            document\r\n              .getElementById(`${currentWord.id}-letter-${i}`)\r\n              .classList.add(\"yellow\");\r\n          } else {\r\n            document\r\n              .getElementById(`${currentWord.id}-letter-${i}`)\r\n              .classList.add(\"wrong\");\r\n          }\r\n        } else {\r\n          document\r\n            .getElementById(`${currentWord.id}-letter-${i}`)\r\n            .classList.add(\"wrong\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  function textInputChangeHandler(e) {\r\n    let keyClicked = e.nativeEvent.data;\r\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\"));\r\n    if (keyClicked == \" \") {\r\n    } else {\r\n      dispatch(updateInput(enteredValue));\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    dispatch(evaluateWords(enteredWord, curWord));\r\n\r\n  }, [enteredWord]);\r\n\r\n  return (\r\n    <Container width={`${currentWord.width}px`} left={`${currentWord.left}px`}>\r\n      <input\r\n        id=\"textInput\"\r\n        autoCapitalize=\"off\"\r\n        autoComplete=\"off\"\r\n        spellCheck=\"false\"\r\n        maxLength=\"15\"\r\n        value={enteredWord}\r\n        onChange={(e) => setTimeout(textInputChangeHandler(e), 1)}\r\n      ></input>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default TextInput;\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  input {\r\n    background-color: transparent;\r\n    border: none;\r\n    border-bottom: #aaa solid 2px;\r\n    caret-color: #ffff;\r\n    font-size: 1.2em;\r\n    text-align: center;\r\n    margin: 10px 0 20px;\r\n    padding: 3px 3px 5px;\r\n    color: #ffff;\r\n    width: ${(props) => props.width};\r\n    transform: translateX(${(props) => props.left});\r\n    transition: all 150ms ease-in-out;\r\n\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n  }\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}