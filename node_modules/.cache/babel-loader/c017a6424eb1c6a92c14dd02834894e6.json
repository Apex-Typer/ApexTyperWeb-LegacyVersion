{"ast":null,"code":"var _jsxFileName = \"D:\\\\APEX_TYPER\\\\apex_typer_5.0\\\\src\\\\components\\\\TextInput.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { firstWord, nextWord, prevWord, updateInput, resetInput, focusInput, blurInput, updateCurrentWord, updateAndChangeCurrentWord, confirmWord } from \"../state/action-creators/index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction TextInput(props) {\n  _s();\n\n  const currentWord = useSelector(state => state.currentWord);\n  const enteredWord = useSelector(state => state.enteredWord);\n  const inputFocused = useSelector(state => state.inputFocused);\n  const dispatch = useDispatch();\n  const testContentScrollerCount = useRef(1);\n  const prevWordAtScroll = useRef(\"\");\n  const inputRef = useRef(null);\n  var textInput = document.getElementById(\"textInput\");\n  useEffect(() => {\n    if (inputFocused && textInput != document.activeElement && currentWord.key > 0) {\n      textInput.focus(); // console.log('l');\n    }\n  }, [inputFocused]);\n  useEffect(() => {\n    if (currentWord.key > 0) {\n      textInput.focus();\n\n      if (currentWord.key > 1) {\n        if (document.getElementById(currentWord.id).offsetLeft - document.getElementById(currentWord.id).parentElement.offsetLeft == 0 && currentWord.word != prevWordAtScroll.current) {\n          testContentScroller();\n        }\n      }\n    }\n  }, [currentWord]);\n  useEffect(() => {\n    dispatch(firstWord());\n    dispatch(focusInput());\n  }, []);\n  useEffect(() => {\n    if (currentWord.key != 0) {\n      dispatch(updateCurrentWord(currentWord, enteredWord));\n    }\n  }, [enteredWord]);\n\n  function testContentScroller() {\n    let currentLineHeight = parseInt(window.getComputedStyle(document.getElementById(\"testContent\")).getPropertyValue(\"line-height\"));\n    document.getElementById(\"testContentChild\").style.transform = `translateY(-${currentLineHeight * testContentScrollerCount.current}px)`;\n    testContentScrollerCount.current++;\n    prevWordAtScroll.current = currentWord.word;\n  }\n\n  function textInputChangeHandler(e) {\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\"));\n    dispatch(updateInput(enteredValue, currentWord.word));\n  }\n\n  function keyDownHandler(e) {\n    let keyClicked = e.nativeEvent.code;\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\"));\n\n    if (keyClicked == \"Space\" && enteredValue != \"\") {\n      dispatch(updateAndChangeCurrentWord(currentWord, enteredWord));\n      dispatch(nextWord());\n      dispatch(resetInput());\n    }\n  }\n\n  function handleClickOutside(e) {\n    if (inputRef.current && !inputRef.current.contains(e.target) && !e.target.matches(\"#testContent\") && !inputFocused) {\n      dispatch(focusInput());\n    } else {\n      dispatch(focusInput());\n    }\n  }\n\n  useEffect(() => {\n    document.addEventListener(\"mousedown\", handleClickOutside, true);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleClickOutside, true);\n    };\n  }, [inputRef]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      ref: inputRef,\n      id: \"textInput\",\n      autoCapitalize: \"off\",\n      autoComplete: \"off\",\n      spellCheck: \"false\",\n      maxLength: \"15\",\n      value: enteredWord.word,\n      onKeyDown: e => keyDownHandler(e) // onChange={(e) => setTimeout(textInputChangeHandler(e), 1)}\n      ,\n      onChange: e => textInputChangeHandler(e)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        if (inputRef.current) {\n          inputRef.current.focus();\n        }\n      },\n      children: \"C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TextInput, \"xRgDlLajSHNJ4kLoPgG35bLlM9M=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = TextInput;\nexport default TextInput;\nconst Container = styled.div`\n  width: 100%;\n  position: \"absolute\";\n\n  input {\n    background-color: transparent;\n    border: none;\n    border: white 1px solid;\n    cursor: default;\n    border-bottom: \"none\";\n    caret-color: transparent;\n    caret-color: white;\n    font-size: 1.2em;\n    font-family: \"Quicksand\", sans-serif;\n    font-weight: 500;\n    text-align: center;\n    color: transparent;\n    transition: all 150ms ease-in-out;\n\n    &:focus {\n      outline: none;\n    }\n  }\n`;\n_c2 = Container;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TextInput\");\n$RefreshReg$(_c2, \"Container\");","map":{"version":3,"sources":["D:/APEX_TYPER/apex_typer_5.0/src/components/TextInput.js"],"names":["React","useState","useEffect","useRef","styled","useSelector","useDispatch","firstWord","nextWord","prevWord","updateInput","resetInput","focusInput","blurInput","updateCurrentWord","updateAndChangeCurrentWord","confirmWord","TextInput","props","currentWord","state","enteredWord","inputFocused","dispatch","testContentScrollerCount","prevWordAtScroll","inputRef","textInput","document","getElementById","activeElement","key","focus","id","offsetLeft","parentElement","word","current","testContentScroller","currentLineHeight","parseInt","window","getComputedStyle","getPropertyValue","style","transform","textInputChangeHandler","e","enteredValue","String","target","value","replace","keyDownHandler","keyClicked","nativeEvent","code","handleClickOutside","contains","matches","addEventListener","removeEventListener","Container","div"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  firstWord,\r\n  nextWord,\r\n  prevWord,\r\n  updateInput,\r\n  resetInput,\r\n  focusInput,\r\n  blurInput,\r\n  updateCurrentWord,\r\n  updateAndChangeCurrentWord,\r\n  confirmWord,\r\n} from \"../state/action-creators/index\";\r\n\r\nfunction TextInput(props) {\r\n  const currentWord = useSelector((state) => state.currentWord);\r\n  const enteredWord = useSelector((state) => state.enteredWord);\r\n  const inputFocused = useSelector((state) => state.inputFocused);\r\n  const dispatch = useDispatch();\r\n\r\n  const testContentScrollerCount = useRef(1);\r\n  const prevWordAtScroll = useRef(\"\");\r\n  const inputRef = useRef(null);\r\n\r\n  var textInput = document.getElementById(\"textInput\");\r\n\r\n  useEffect(() => {\r\n    if (\r\n      inputFocused &&\r\n      textInput != document.activeElement &&\r\n      currentWord.key > 0\r\n    ) {\r\n      textInput.focus();\r\n      // console.log('l');\r\n    }\r\n  }, [inputFocused]);\r\n\r\n  useEffect(() => {\r\n    if (currentWord.key > 0) {\r\n      textInput.focus();\r\n      if (currentWord.key > 1) {\r\n        if (\r\n          document.getElementById(currentWord.id).offsetLeft -\r\n            document.getElementById(currentWord.id).parentElement.offsetLeft ==\r\n            0 &&\r\n          currentWord.word != prevWordAtScroll.current\r\n        ) {\r\n          testContentScroller();\r\n        }\r\n      }\r\n    }\r\n  }, [currentWord]);\r\n\r\n  useEffect(() => {\r\n    dispatch(firstWord());\r\n    dispatch(focusInput());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (currentWord.key != 0) {\r\n      dispatch(updateCurrentWord(currentWord, enteredWord));\r\n    }\r\n  }, [enteredWord]);\r\n\r\n  function testContentScroller() {\r\n    let currentLineHeight = parseInt(\r\n      window\r\n        .getComputedStyle(document.getElementById(\"testContent\"))\r\n        .getPropertyValue(\"line-height\")\r\n    );\r\n    document.getElementById(\r\n      \"testContentChild\"\r\n    ).style.transform = `translateY(-${\r\n      currentLineHeight * testContentScrollerCount.current\r\n    }px)`;\r\n    testContentScrollerCount.current++;\r\n    prevWordAtScroll.current = currentWord.word;\r\n  }\r\n\r\n  function textInputChangeHandler(e) {\r\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\"));\r\n    dispatch(updateInput(enteredValue, currentWord.word));\r\n  }\r\n\r\n  function keyDownHandler(e) {\r\n    let keyClicked = e.nativeEvent.code;\r\n    let enteredValue = String(e.target.value.replace(/\\s/g, \"\"));\r\n    if (keyClicked == \"Space\" && enteredValue != \"\") {\r\n      dispatch(updateAndChangeCurrentWord(currentWord, enteredWord));\r\n      dispatch(nextWord());\r\n      dispatch(resetInput());\r\n    }\r\n  }\r\n\r\n  function handleClickOutside(e) {\r\n    if (\r\n      (inputRef.current && !inputRef.current.contains(e.target)) &&\r\n      !e.target.matches(\"#testContent\") && !inputFocused\r\n    ) {\r\n      dispatch(focusInput());\r\n\r\n    } else {\r\n      dispatch(focusInput());\r\n    }\r\n  }\r\n  \r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", handleClickOutside, true);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside, true);\r\n    };\r\n  }, [inputRef]);\r\n\r\n  return (\r\n    <Container>\r\n      <input\r\n        ref={inputRef}\r\n        id=\"textInput\"\r\n        autoCapitalize=\"off\"\r\n        autoComplete=\"off\"\r\n        spellCheck=\"false\"\r\n        maxLength=\"15\"\r\n        value={enteredWord.word}\r\n        onKeyDown={(e) => keyDownHandler(e)}\r\n        // onChange={(e) => setTimeout(textInputChangeHandler(e), 1)}\r\n        onChange={(e) => textInputChangeHandler(e)}\r\n      ></input>\r\n      <button\r\n        onClick={() => {\r\n          if (inputRef.current) {\r\n            inputRef.current.focus();\r\n          }\r\n        }}\r\n      >\r\n        C\r\n      </button>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default TextInput;\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  position: \"absolute\";\r\n\r\n  input {\r\n    background-color: transparent;\r\n    border: none;\r\n    border: white 1px solid;\r\n    cursor: default;\r\n    border-bottom: \"none\";\r\n    caret-color: transparent;\r\n    caret-color: white;\r\n    font-size: 1.2em;\r\n    font-family: \"Quicksand\", sans-serif;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    color: transparent;\r\n    transition: all 150ms ease-in-out;\r\n\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n  }\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}