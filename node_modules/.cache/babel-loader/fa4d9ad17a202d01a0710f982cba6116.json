{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/APEX_TYPER/apex_typer_5.0/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _defineProperty from\"D:/APEX_TYPER/apex_typer_5.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/APEX_TYPER/apex_typer_5.0/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/APEX_TYPER/apex_typer_5.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12;import React,{useEffect,useState,forwardRef,useRef}from\"react\";import styled from\"styled-components\";import{Fade}from\"react-reveal\";import HeadShake from\"react-reveal/HeadShake\";import{useDispatch,useSelector}from\"react-redux\";import{closeTimeInput,updateTestTimer,closeTimeMenu}from\"../state/action-creators\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CustomTime(){// states and state managers\nvar timeInputContainer=useRef(null);var time=useSelector(function(state){return state.testTimer.time;});var timeForDisplay=useSelector(function(state){return state.testTimer.forDisplay;});var _useState=useState({minutes:parseInt(timeForDisplay.minutes),seconds:parseInt(timeForDisplay.seconds)}),_useState2=_slicedToArray(_useState,2),customTime=_useState2[0],setTime=_useState2[1];var dispatch=useDispatch();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),MinuteInputError=_useState4[0],setMinuteInputError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),SecondInputError=_useState6[0],setSecondInputError=_useState6[1];if(MinuteInputError||SecondInputError){setTimeout(function(){setMinuteInputError(false);setSecondInputError(false);},100);}// to ensure second's input stays zero when minutes is set to 60\nuseEffect(function(){if(customTime.minutes==60&&customTime.seconds>0){setTime(function(prevTime){return _objectSpread(_objectSpread({},prevTime),{},{seconds:0});});inputError(\"seconds\");}},[customTime]);useEffect(function(){if(timeInputContainer.current){timeInputContainer.current.focus();}},[customTime]);// event handlers\nfunction inputError(t){switch(t){case\"minutes\":setMinuteInputError(true);break;case\"seconds\":setSecondInputError(true);break;default:break;}}function valueController(m,l,v,t){var r;if(v>=m&&v<=l){r=v;}else if(v>l){if(t==\"seconds\"){r=m;inputError(t);timeUpdate({target:{value:customTime.minutes+1}},\"minutes\",\"custom\");}else{r=l;inputError(t);}}else if(v<m){r=m;inputError(t);}else{r=0;}return r;}function timeUpdate(e,t,c){switch(c){case\"custom\":setTime(function(prevTime){return _objectSpread(_objectSpread({},prevTime),{},_defineProperty({},t,valueController(0,60,parseInt(e.target.value),t)));});break;case\"increment\":setTime(function(prevTime){return _objectSpread(_objectSpread({},prevTime),{},_defineProperty({},t,valueController(0,60,parseInt(prevTime[t])+1,t)));});break;case\"decrement\":setTime(function(prevTime){return _objectSpread(_objectSpread({},prevTime),{},_defineProperty({},t,valueController(0,60,parseInt(prevTime[t])-1,t)));});break;case\"reset\":setTime(function(prevTime){return _objectSpread(_objectSpread({},prevTime),{},_defineProperty({},t,\"\"));});break;case\"fill\":setTime(function(prevTime){return _objectSpread(_objectSpread({},prevTime),{},_defineProperty({},t,0));});break;default:break;}}function keyDownHandler(event){switch(event.key){case\"Escape\":dispatch(closeTimeInput());break;case\"Enter\":dispatch(updateTestTimer(parseInt(customTime[\"minutes\"]*60)+parseInt(customTime[\"seconds\"])));dispatch(closeTimeInput());dispatch(closeTimeMenu());break;default:break;}}return/*#__PURE__*/_jsx(Container,{ref:timeInputContainer,tabIndex:\"2\",onKeyDown:function onKeyDown(event){keyDownHandler(event);},children:/*#__PURE__*/_jsx(Fade,{bottom:true,duration:250,children:/*#__PURE__*/_jsxs(TimeInput,{id:\"CustomTimeInput\",children:[/*#__PURE__*/_jsx(CloseTimeInput,{src:\"icons/close.png\",className:\"cyan-icon\",onClick:function onClick(){return dispatch(closeTimeInput());}}),/*#__PURE__*/_jsxs(TimeInputFixedOptions1,{children:[/*#__PURE__*/_jsx(TimeOptions,{onClick:function onClick(){timeUpdate({target:{value:0}},\"minutes\",\"custom\");timeUpdate({target:{value:0}},\"seconds\",\"custom\");},className:time==0?\"selected-time-option\":\"\",children:\"0s\"}),/*#__PURE__*/_jsx(TimeOptions,{onClick:function onClick(){timeUpdate({target:{value:0}},\"minutes\",\"custom\");timeUpdate({target:{value:30}},\"seconds\",\"custom\");},className:time==30?\"selected-time-option\":\"\",children:\"30s\"}),/*#__PURE__*/_jsx(TimeOptions,{onClick:function onClick(){timeUpdate({target:{value:0}},\"minutes\",\"custom\");timeUpdate({target:{value:60}},\"seconds\",\"custom\");},className:time==60?\"selected-time-option\":\"\",children:\"60s\"})]}),/*#__PURE__*/_jsxs(TimeInputUI,{children:[/*#__PURE__*/_jsxs(MinuteBlock,{children:[/*#__PURE__*/_jsx(\"img\",{src:\"/icons/up-arrow.png\",className:\"grey-icon arrow-icon\",alt:\"\",onClick:function onClick(event){return timeUpdate(event,\"minutes\",\"increment\");}}),/*#__PURE__*/_jsx(HeadShake,{when:MinuteInputError,duration:400,children:/*#__PURE__*/_jsx(MinuteInput,{type:\"number\",value:customTime.minutes,onFocus:function onFocus(event){timeUpdate(event,\"minutes\",\"reset\");},onBlur:customTime.minutes===null?function(event){return timeUpdate(event,\"minutes\",\"fill\");}:function(event){return timeUpdate(event,\"minutes\",\"custom\");},onChange:function onChange(event){timeUpdate(event,\"minutes\",\"custom\");}})}),/*#__PURE__*/_jsx(\"img\",{src:\"/icons/down-arrow.png\",className:\"grey-icon arrow-icon\",alt:\"\",onClick:function onClick(event){return timeUpdate(event,\"minutes\",\"decrement\");}})]}),/*#__PURE__*/_jsx(\"span\",{children:\"m\"}),/*#__PURE__*/_jsx(\"span\",{className:\"time-input-divider\",children:\":\"}),/*#__PURE__*/_jsxs(SecondBlock,{children:[/*#__PURE__*/_jsx(\"img\",{src:\"/icons/up-arrow.png\",className:\"grey-icon arrow-icon\",alt:\"\",onClick:function onClick(event){return timeUpdate(event,\"seconds\",\"increment\");}}),/*#__PURE__*/_jsx(HeadShake,{when:SecondInputError,duration:400,children:/*#__PURE__*/_jsx(SecondInput,{type:\"number\",value:customTime.seconds,onFocus:function onFocus(event){return timeUpdate(event,\"seconds\",\"reset\");},onBlur:customTime.seconds?function(event){return timeUpdate(event,\"seconds\",\"custom\");}:function(event){return timeUpdate(event,\"seconds\",\"fill\");},onChange:function onChange(event){return timeUpdate(event,\"seconds\",\"custom\");}})}),/*#__PURE__*/_jsx(\"img\",{src:\"/icons/down-arrow.png\",className:\"grey-icon arrow-icon\",alt:\"\",onClick:function onClick(event){return timeUpdate(event,\"seconds\",\"decrement\");}})]}),/*#__PURE__*/_jsx(\"span\",{children:\"s\"})]}),/*#__PURE__*/_jsxs(TimeInputFixedOptions2,{children:[/*#__PURE__*/_jsx(TimeOptions,{onClick:function onClick(){timeUpdate({target:{value:customTime.seconds-5}},\"seconds\",\"custom\");},children:\"-5s\"}),/*#__PURE__*/_jsx(TimeOptions,{onClick:function onClick(){timeUpdate({target:{value:customTime.seconds+5}},\"seconds\",\"custom\");},children:\"+5s\"})]}),/*#__PURE__*/_jsx(Uploadtime,{onClick:function onClick(){dispatch(updateTestTimer(parseInt(customTime[\"minutes\"]*60)+parseInt(customTime[\"seconds\"])));dispatch(closeTimeInput());dispatch(closeTimeMenu());},children:\"OK\"})]})})});}export default CustomTime;// styles\nvar Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: absolute;\\n  right: 0;\\n  left: 0;\\n  top: 0;\\n  bottom: 0;\\n  z-index: 3;\\n\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  overflow: hidden;\\n\\n  backdrop-filter: blur(3px);\\n  transition: all 250ms ease-in-out;\\n\\n  &:focus {\\n    outline: none;\\n  }\\n\"])));var TimeInputFixedOptions1=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: space-evenly;\\n  width: 100%;\\n  border-bottom: 1px solid rgba(170, 170, 170, 0.2);\\n  border-top: 1px solid rgba(170, 170, 170, 0.2);\\n  margin-top: 10px;\\n  p {\\n    cursor: pointer;\\n    /* margin: 10px 0 10px; */\\n    margin: 5px 0;\\n  }\\n  .selected-time-option {\\n    color: cyan;\\n  }\\n  @media (max-width: 430px) {\\n    p {\\n      font-size: 0.8em;\\n    }\\n  }\\n\"])));var TimeInputFixedOptions2=styled(TimeInputFixedOptions1)(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  margin-top: 0;\\n  justify-content: space-evenly;\\n\"])));var TimeOptions=styled.p(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n\"])));var TimeInput=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  position: relative;\\n  background-color: #17171a;\\n  max-width: 50vw;\\n  width: 300px;\\n  padding: 10px;\\n  border-radius: 5px;\\n\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n\\n  box-shadow: -1px 10px 23px 0px rgba(0, 0, 0, 0.51);\\n  -webkit-box-shadow: -1px 10px 23px 0px rgba(0, 0, 0, 0.51);\\n  -moz-box-shadow: -1px 10px 23px 0px rgba(0, 0, 0, 0.51);\\n\"])));var CloseTimeInput=styled.img(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  width: 12px;\\n  margin-left: auto;\\n  cursor: pointer;\\n  padding: 5px;\\n\"])));var TimeInputUI=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 10px 0px;\\n\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\\n  span {\\n    margin: 0 0 0 10px;\\n    font-size: 1.5em;\\n  }\\n\\n  .arrow-icon {\\n    width: 22px;\\n  }\\n\\n  .time-input-divider {\\n    margin: 0 10px;\\n    color: #00ffff99;\\n    font-size: 1.5em;\\n  }\\n\\n  img {\\n    cursor: pointer;\\n  }\\n\\n  input {\\n    background-color: transparent;\\n    border: none;\\n    color: #aaaaaa;\\n    font-size: 1.5em;\\n    text-align: center;\\n    width: 2ch;\\n  }\\n  input:focus {\\n    outline: none;\\n  }\\n  input::-webkit-outer-spin-button,\\n  input::-webkit-inner-spin-button {\\n    -webkit-appearance: none;\\n  }\\n  input[type=\\\"number\\\"] {\\n    -moz-appearance: textfield;\\n  }\\n\\n  @media (max-width: 430px) {\\n    span {\\n      font-size: 1em;\\n    }\\n    input {\\n      font-size: 1em;\\n    }\\n    .arrow-icon {\\n      width: 18px;\\n    }\\n  }\\n\"])));var MinuteBlock=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n\"])));var MinuteInput=styled.input(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\"])));var SecondBlock=styled(MinuteBlock)(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\"])));var SecondInput=styled(MinuteInput)(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\"])));var Uploadtime=styled.p(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  left: auto;\\n  opacity: 0.75;\\n  color: cyan;\\n  cursor: pointer;\\n  margin: 10px 0px;\\n  @media (max-width: 430px) {\\n    margin: 10px;\\n  }\\n\"])));","map":{"version":3,"sources":["D:/APEX_TYPER/apex_typer_5.0/src/components/CustomTime.js"],"names":["React","useEffect","useState","forwardRef","useRef","styled","Fade","HeadShake","useDispatch","useSelector","closeTimeInput","updateTestTimer","closeTimeMenu","CustomTime","timeInputContainer","time","state","testTimer","timeForDisplay","forDisplay","minutes","parseInt","seconds","customTime","setTime","dispatch","MinuteInputError","setMinuteInputError","SecondInputError","setSecondInputError","setTimeout","prevTime","inputError","current","focus","t","valueController","m","l","v","r","timeUpdate","target","value","e","c","keyDownHandler","event","key","Container","div","TimeInputFixedOptions1","TimeInputFixedOptions2","TimeOptions","p","TimeInput","CloseTimeInput","img","TimeInputUI","MinuteBlock","MinuteInput","input","SecondBlock","SecondInput","Uploadtime"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, forwardRef, useRef } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Fade } from \"react-reveal\";\r\nimport HeadShake from \"react-reveal/HeadShake\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  closeTimeInput,\r\n  updateTestTimer,\r\n  closeTimeMenu,\r\n} from \"../state/action-creators\";\r\n\r\nfunction CustomTime() {\r\n  // states and state managers\r\n\r\n  const timeInputContainer = useRef(null);\r\n\r\n  const time = useSelector((state) => state.testTimer.time);\r\n  const timeForDisplay = useSelector((state) => state.testTimer.forDisplay);\r\n  const [customTime, setTime] = useState({\r\n    minutes: parseInt(timeForDisplay.minutes),\r\n    seconds: parseInt(timeForDisplay.seconds),\r\n  });\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const [MinuteInputError, setMinuteInputError] = useState(false);\r\n  const [SecondInputError, setSecondInputError] = useState(false);\r\n\r\n  if (MinuteInputError || SecondInputError) {\r\n    setTimeout(() => {\r\n      setMinuteInputError(false);\r\n      setSecondInputError(false);\r\n    }, 100);\r\n  }\r\n\r\n  // to ensure second's input stays zero when minutes is set to 60\r\n\r\n  useEffect(() => {\r\n    if (customTime.minutes == 60 && customTime.seconds > 0) {\r\n      setTime((prevTime) => ({ ...prevTime, seconds: 0 }));\r\n      inputError(\"seconds\");\r\n    }\r\n  }, [customTime]);\r\n  useEffect(() => {\r\n    if (timeInputContainer.current) {\r\n      timeInputContainer.current.focus();\r\n    }\r\n  }, [customTime]);\r\n\r\n  // event handlers\r\n\r\n  function inputError(t) {\r\n    switch (t) {\r\n      case \"minutes\":\r\n        setMinuteInputError(true);\r\n        break;\r\n      case \"seconds\":\r\n        setSecondInputError(true);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  function valueController(m, l, v, t) {\r\n    let r;\r\n    if (v >= m && v <= l) {\r\n      r = v;\r\n    } else if (v > l) {\r\n      if (t == \"seconds\") {\r\n        r = m;\r\n        inputError(t);\r\n        timeUpdate(\r\n          { target: { value: customTime.minutes + 1 } },\r\n          \"minutes\",\r\n          \"custom\"\r\n        );\r\n      } else {\r\n        r = l;\r\n        inputError(t);\r\n      }\r\n    } else if (v < m) {\r\n      r = m;\r\n      inputError(t);\r\n    } else {\r\n      r = 0;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  function timeUpdate(e, t, c) {\r\n    switch (c) {\r\n      case \"custom\":\r\n        setTime((prevTime) => ({\r\n          ...prevTime,\r\n          [t]: valueController(0, 60, parseInt(e.target.value), t),\r\n        }));\r\n        break;\r\n      case \"increment\":\r\n        setTime((prevTime) => ({\r\n          ...prevTime,\r\n          [t]: valueController(0, 60, parseInt(prevTime[t]) + 1, t),\r\n        }));\r\n        break;\r\n      case \"decrement\":\r\n        setTime((prevTime) => ({\r\n          ...prevTime,\r\n          [t]: valueController(0, 60, parseInt(prevTime[t]) - 1, t),\r\n        }));\r\n        break;\r\n      case \"reset\":\r\n        setTime((prevTime) => ({ ...prevTime, [t]: \"\" }));\r\n        break;\r\n      case \"fill\":\r\n        setTime((prevTime) => ({ ...prevTime, [t]: 0 }));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  function keyDownHandler(event) {\r\n    switch (event.key) {\r\n      case \"Escape\":\r\n        dispatch(closeTimeInput());\r\n        break;\r\n      case \"Enter\":\r\n        dispatch(\r\n          updateTestTimer(\r\n            parseInt(customTime[\"minutes\"] * 60) +\r\n              parseInt(customTime[\"seconds\"])\r\n          )\r\n        );\r\n        dispatch(closeTimeInput());\r\n        dispatch(closeTimeMenu());\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  return (\r\n    <Container\r\n      ref={timeInputContainer}\r\n      tabIndex=\"2\"\r\n      onKeyDown={(event) => {\r\n        keyDownHandler(event);\r\n      }}\r\n    >\r\n      <Fade bottom duration={250}>\r\n        <TimeInput id=\"CustomTimeInput\">\r\n          <CloseTimeInput\r\n            src=\"icons/close.png\"\r\n            className=\"cyan-icon\"\r\n            onClick={() => dispatch(closeTimeInput())}\r\n          />\r\n\r\n          <TimeInputFixedOptions1>\r\n            <TimeOptions\r\n              onClick={() => {\r\n                timeUpdate({ target: { value: 0 } }, \"minutes\", \"custom\");\r\n                timeUpdate({ target: { value: 0 } }, \"seconds\", \"custom\");\r\n              }}\r\n              className={time == 0 ? \"selected-time-option\" : \"\"}\r\n            >\r\n              0s\r\n            </TimeOptions>\r\n\r\n            <TimeOptions\r\n              onClick={() => {\r\n                timeUpdate({ target: { value: 0 } }, \"minutes\", \"custom\");\r\n                timeUpdate({ target: { value: 30 } }, \"seconds\", \"custom\");\r\n              }}\r\n              className={time == 30 ? \"selected-time-option\" : \"\"}\r\n            >\r\n              30s\r\n            </TimeOptions>\r\n\r\n            <TimeOptions\r\n              onClick={() => {\r\n                timeUpdate({ target: { value: 0 } }, \"minutes\", \"custom\");\r\n                timeUpdate({ target: { value: 60 } }, \"seconds\", \"custom\");\r\n              }}\r\n              className={time == 60 ? \"selected-time-option\" : \"\"}\r\n            >\r\n              60s\r\n            </TimeOptions>\r\n          </TimeInputFixedOptions1>\r\n\r\n          <TimeInputUI>\r\n            <MinuteBlock>\r\n              <img\r\n                src=\"/icons/up-arrow.png\"\r\n                className=\"grey-icon arrow-icon\"\r\n                alt=\"\"\r\n                onClick={(event) => timeUpdate(event, \"minutes\", \"increment\")}\r\n              />\r\n\r\n              <HeadShake when={MinuteInputError} duration={400}>\r\n                <MinuteInput\r\n                  type=\"number\"\r\n                  value={customTime.minutes}\r\n                  onFocus={(event) => {\r\n                    timeUpdate(event, \"minutes\", \"reset\");\r\n                  }}\r\n                  onBlur={\r\n                    customTime.minutes === null\r\n                      ? (event) => timeUpdate(event, \"minutes\", \"fill\")\r\n                      : (event) => timeUpdate(event, \"minutes\", \"custom\")\r\n                  }\r\n                  onChange={(event) => {\r\n                    timeUpdate(event, \"minutes\", \"custom\");\r\n                  }}\r\n                />\r\n              </HeadShake>\r\n\r\n              <img\r\n                src=\"/icons/down-arrow.png\"\r\n                className=\"grey-icon arrow-icon\"\r\n                alt=\"\"\r\n                onClick={(event) => timeUpdate(event, \"minutes\", \"decrement\")}\r\n              />\r\n            </MinuteBlock>\r\n\r\n            <span>m</span>\r\n            <span className=\"time-input-divider\">:</span>\r\n\r\n            <SecondBlock>\r\n              <img\r\n                src=\"/icons/up-arrow.png\"\r\n                className=\"grey-icon arrow-icon\"\r\n                alt=\"\"\r\n                onClick={(event) => timeUpdate(event, \"seconds\", \"increment\")}\r\n              />\r\n\r\n              <HeadShake when={SecondInputError} duration={400}>\r\n                <SecondInput\r\n                  type=\"number\"\r\n                  value={customTime.seconds}\r\n                  onFocus={(event) => timeUpdate(event, \"seconds\", \"reset\")}\r\n                  onBlur={\r\n                    customTime.seconds\r\n                      ? (event) => timeUpdate(event, \"seconds\", \"custom\")\r\n                      : (event) => timeUpdate(event, \"seconds\", \"fill\")\r\n                  }\r\n                  onChange={(event) => timeUpdate(event, \"seconds\", \"custom\")}\r\n                />\r\n              </HeadShake>\r\n\r\n              <img\r\n                src=\"/icons/down-arrow.png\"\r\n                className=\"grey-icon arrow-icon\"\r\n                alt=\"\"\r\n                onClick={(event) => timeUpdate(event, \"seconds\", \"decrement\")}\r\n              />\r\n            </SecondBlock>\r\n\r\n            <span>s</span>\r\n          </TimeInputUI>\r\n\r\n          <TimeInputFixedOptions2>\r\n            <TimeOptions\r\n              onClick={() => {\r\n                timeUpdate(\r\n                  { target: { value: customTime.seconds - 5 } },\r\n                  \"seconds\",\r\n                  \"custom\"\r\n                );\r\n              }}\r\n            >\r\n              -5s\r\n            </TimeOptions>\r\n            <TimeOptions\r\n              onClick={() => {\r\n                timeUpdate(\r\n                  { target: { value: customTime.seconds + 5 } },\r\n                  \"seconds\",\r\n                  \"custom\"\r\n                );\r\n              }}\r\n            >\r\n              +5s\r\n            </TimeOptions>\r\n          </TimeInputFixedOptions2>\r\n          <Uploadtime\r\n            onClick={() => {\r\n              dispatch(\r\n                updateTestTimer(\r\n                  parseInt(customTime[\"minutes\"] * 60) +\r\n                    parseInt(customTime[\"seconds\"])\r\n                )\r\n              );\r\n              dispatch(closeTimeInput());\r\n              dispatch(closeTimeMenu());\r\n            }}\r\n          >\r\n            OK\r\n          </Uploadtime>\r\n        </TimeInput>\r\n      </Fade>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default CustomTime;\r\n\r\n// styles\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  left: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 3;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  overflow: hidden;\r\n\r\n  backdrop-filter: blur(3px);\r\n  transition: all 250ms ease-in-out;\r\n\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n`;\r\n\r\nconst TimeInputFixedOptions1 = styled.div`\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  width: 100%;\r\n  border-bottom: 1px solid rgba(170, 170, 170, 0.2);\r\n  border-top: 1px solid rgba(170, 170, 170, 0.2);\r\n  margin-top: 10px;\r\n  p {\r\n    cursor: pointer;\r\n    /* margin: 10px 0 10px; */\r\n    margin: 5px 0;\r\n  }\r\n  .selected-time-option {\r\n    color: cyan;\r\n  }\r\n  @media (max-width: 430px) {\r\n    p {\r\n      font-size: 0.8em;\r\n    }\r\n  }\r\n`;\r\n\r\nconst TimeInputFixedOptions2 = styled(TimeInputFixedOptions1)`\r\n  margin-top: 0;\r\n  justify-content: space-evenly;\r\n`\r\n\r\nconst TimeOptions = styled.p`\r\n`;\r\n\r\nconst TimeInput = styled.div`\r\n  position: relative;\r\n  background-color: #17171a;\r\n  max-width: 50vw;\r\n  width: 300px;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  box-shadow: -1px 10px 23px 0px rgba(0, 0, 0, 0.51);\r\n  -webkit-box-shadow: -1px 10px 23px 0px rgba(0, 0, 0, 0.51);\r\n  -moz-box-shadow: -1px 10px 23px 0px rgba(0, 0, 0, 0.51);\r\n`;\r\n\r\nconst CloseTimeInput = styled.img`\r\n  width: 12px;\r\n  margin-left: auto;\r\n  cursor: pointer;\r\n  padding: 5px;\r\n`;\r\nconst TimeInputUI = styled.div`\r\n  width: 100%;\r\n  padding: 10px 0px;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  span {\r\n    margin: 0 0 0 10px;\r\n    font-size: 1.5em;\r\n  }\r\n\r\n  .arrow-icon {\r\n    width: 22px;\r\n  }\r\n\r\n  .time-input-divider {\r\n    margin: 0 10px;\r\n    color: #00ffff99;\r\n    font-size: 1.5em;\r\n  }\r\n\r\n  img {\r\n    cursor: pointer;\r\n  }\r\n\r\n  input {\r\n    background-color: transparent;\r\n    border: none;\r\n    color: #aaaaaa;\r\n    font-size: 1.5em;\r\n    text-align: center;\r\n    width: 2ch;\r\n  }\r\n  input:focus {\r\n    outline: none;\r\n  }\r\n  input::-webkit-outer-spin-button,\r\n  input::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n  }\r\n  input[type=\"number\"] {\r\n    -moz-appearance: textfield;\r\n  }\r\n\r\n  @media (max-width: 430px) {\r\n    span {\r\n      font-size: 1em;\r\n    }\r\n    input {\r\n      font-size: 1em;\r\n    }\r\n    .arrow-icon {\r\n      width: 18px;\r\n    }\r\n  }\r\n`;\r\nconst MinuteBlock = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst MinuteInput = styled.input``;\r\n\r\nconst SecondBlock = styled(MinuteBlock)``;\r\n\r\nconst SecondInput = styled(MinuteInput)``;\r\n\r\nconst Uploadtime = styled.p`\r\n  left: auto;\r\n  opacity: 0.75;\r\n  color: cyan;\r\n  cursor: pointer;\r\n  margin: 10px 0px;\r\n  @media (max-width: 430px) {\r\n    margin: 10px;\r\n  }\r\n`;\r\n"]},"metadata":{},"sourceType":"module"}